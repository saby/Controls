@import "../../_scroll/Scroll/_contentEnvironmentZIndex";

.controls-TileView {
   display: flex;
   flex-wrap: wrap;

   .controls-ListView__group {
      flex-basis: 100%;
      width: 100%;
   }
}

.controls-TileView__itemPaddingContainer_spacingLeft_default {
   margin-left: -@spacing_TileView-between-items / 2 + @padding-left_default_tile;
}

.controls-TileView__itemPaddingContainer_spacingLeft_null {
   margin-left: -@spacing_TileView-between-items / 2;
}

.controls-TileView__itemPaddingContainer_spacingLeft_s {
   margin-left: -@spacing_TileView-between-items / 2 + @padding-left_s_tile;
}

.controls-TileView__itemPaddingContainer_spacingLeft_m {
   margin-left: -@spacing_TileView-between-items / 2 + @padding-left_m_tile;
}

.controls-TileView__itemPaddingContainer_spacingLeft_l {
   margin-left: -@spacing_TileView-between-items / 2 + @padding-left_l_tile;
}

.controls-TileView__itemPaddingContainer_spacingRight_default {
   margin-right: -@spacing_TileView-between-items / 2 + @padding-right_default_tile;
}

.controls-TileView__itemPaddingContainer_spacingRight_null {
   margin-right: -@spacing_TileView-between-items / 2;
}

.controls-TileView__itemPaddingContainer_spacingRight_s {
   margin-right: -@spacing_TileView-between-items / 2 + @padding-right_s_tile;
}

.controls-TileView__itemPaddingContainer_spacingRight_m {
   margin-right: -@spacing_TileView-between-items / 2 + @padding-right_m_tile;
}

.controls-TileView__itemPaddingContainer_spacingRight_l {
   margin-right: -@spacing_TileView-between-items / 2 + @padding-right_l_tile;
}

.controls-TileView__item {
   position: relative;
   flex-grow: 1;
   margin: @spacing_TileView-between-items / 2;
}

.controls-TileView__item .controls-itemActionsV {
   display: inline-block;
   opacity: 0;
}

.ws-is-ie12 .controls-TileView__item .controls-itemActionsV {
   display: inline-flex;
   opacity: 0;
   align-items: center;
}

.controls-TileView__itemContent {
   background-color: @background-color_TileView-item;
   box-sizing: border-box;
   overflow: hidden;
   position: absolute;
   top: 0;
   left: 0;
   right: 0;
}

.controls-TileView__item_unfixed, .controls-TileView__item_unscaleable {
   max-height: 100%;
}

.controls-TileView__item_active.controls-TileView__item_unscaleable,
.controls-TileView__item:hover > .controls-TileView__item_unscaleable {
   max-height: none;
}

.controls-TileView__item_animated .controls-itemActionsV {
   transition: opacity 0.05s step-end;
}
.controls-TileView__item_animated {
   transition-property: left, right, bottom, top, height;
   transition-duration: 0.05s;
}

.controls-TileView__title {
   border-top: @border-width_TileView-title solid @border-color_TileView-title;
   max-height: @max-height_TileView-title;
   min-height: @min-height_TileView-title;
   padding: @spacing_TileView-between-title-topBorder @spacing_TileView-between-title-rightBorder @spacing_TileView-between-title-bottomBorder @spacing_TileView-between-title-leftBorder;
   overflow: hidden;
   text-overflow: ellipsis;
   white-space: nowrap;
   flex-shrink: 0;
}

.controls-TileView__imageWrapper {
   position: relative;
   display: flex;
   align-items: center;
   justify-content: center;
   overflow: hidden;
}

.controls-TileView__image {
   position: absolute;
}

.controls-ListView__item_shadow_visible {
   box-shadow: @box-shadow-size_TileView-item @box-shadow-color_TileView-item;
}

.ws-is-hover {
   .controls-TileView__itemContent_highlightOnHover:hover {
      background-color: @background-color_TileView-item_hover;
   }

   .controls-ListView__item_shadow_visible, .controls-ListView__item_shadow_onhover {
      &:hover, &.controls-TileView__item_active, &.controls-TileView__item_swiped {
         box-shadow: @box-shadow-size_TileView-item @box-shadow-color_TileView-item_hover;
      }
   }
}
.ws-is-no-touch {
   // On ios the tile is positioned absolutely, without increasing. Increases only the caption. It may not fit,
   // if the parent container limits through overflow: hidden.
   // Turn on the display of the caption only for the desktop, so tile does not change the size by swipe on ios .
   .controls-TileView__item_hovered,
   .controls-TileView__item_active,
   .controls-TileView__item:hover > .controls-TileView__item_unscaleable {
      .controls-TileView__title_invisible {
         display: block;
      }
   }
   // On ios, the caption should not be resized. The reason is described above.
   // By hover, activation or swipe caption do not fit in one line are transferred to the next line.
   // Because of this, its size changes. Do the word break on the desktop.
   .controls-TileView__item_hovered, .controls-TileView__item_active, .controls-TileView__item_swiped,
   .controls-TileView__item:hover > .controls-TileView__item_unscaleable {
      .controls-TileView__title {
         white-space: normal;
         word-break: break-all;
      }
   }
}

.controls-TileView__item_scaled,
.controls-TileView__item:hover > .controls-TileView__item_unscaleable {
   // TODO: KINGO
   // чекбоксы на плитке имеют z-index: 1, и, если плитка не увеличена (например навели на чекбокс),
   // то чекбоксы других плиток будут поверх заголовка текущей, если он появился снизу от плитки.
   // Поэтому нужно установить для активной плитки z-index больше чем у чекбоксов
   z-index: 2;
}
.controls-TileView__item_hovered, .controls-TileView__item_active, .controls-TileView__item_swiped,
.controls-TileView__item:hover > .controls-TileView__item_unscaleable {
   .controls-TileView__title, .controls-TileView__title_accent {
      background-color: @background-color_TileView-title;
   }
   .controls-TileView__title_accent {
      text-decoration: underline;
   }
}

.controls-TileView__item_fixed {
   //Set the value to more than scrollContainer, so that when you increase the tiles appear above the shadows and scrollbar.
   z-index: @z-index_Scroll-contentEnvironment + 1;
   position: fixed;
}

.controls-TileView__title_invisible {
   display: none;
}

.controls-TileView__checkbox {
   position: absolute;
   z-index: 1;

   .controls-Checkbox__iconWrapper:before {
      background-color: @background-color_TileView-checkbox;
   }
}

.controls-TileView__checkbox_top {
   top: 0;
   left: 0;
}

.controls-TileView__item_withoutMarker {
   border: @border-width_TileView-item solid @border-color_TileView-item;
}

.controls-TileView__item_withMarker {
   border: @border-width_TileView-item solid @border-color_TileView-item_marked;
}

//TODO: Можно убрать после решения задачи: https://online.sbis.ru/opendoc.html?guid=38c5aa2c-f30c-42e9-a654-5358bc7691fd
.controls-itemActionsV.controls-TileView__itemActions {
   padding: 0;
}

.ws-is-ie12 .controls-itemActionsV__wrapper.controls-TileView__itemActions {
   padding: 0;
}
//TODO: end

.controls-itemActionsV.controls-TileView__itemActions {
   background-color: @background-color_TileView-title;
}

.ws-is-ie12 .controls-itemActionsV__wrapper.controls-TileView__itemActions {
   background-color: @background-color_TileView-title;
}

.controls-TileView__footer {
   width: 100%;
   margin-left: @spacing_TileView-between-items / 2;
}
// FIXME: https://online.sbis.ru/opendoc.html?guid=8b2c991d-05d9-4513-be30-350a1b16fed9
.controls-TileView__footer:empty {
   margin-left: 0;
}

.controls-TileView__itemActions:before {
   content: '';
   width: @width_TileView-itemActions-shadow;
   height: 100%;
   position: absolute;
   top: 0;
   left: -@width_TileView-itemActions-shadow;

   //dont use transparent because https://stackoverflow.com/questions/38391457/linear-gradient-to-transparent-bug-in-latest-safari
   background: linear-gradient(to right, fade(@background-color_TileView-title, 0), @background-color_TileView-title);
}

//Internal variable required to reduce the height of the image under the title.
@height_TileView-title: @min-height_TileView-title + @border-width_TileView-title + @spacing_TileView-between-title-topBorder + @spacing_TileView-between-title-bottomBorder;
.controls-TileView__resizer {
   margin-bottom: -@height_TileView-title;
}

.controls-TileView__imageWrapper_reduced {
   border-bottom: @height_TileView-title solid transparent;
   margin-bottom: -@height_TileView-title;
   box-sizing: border-box;
}

.controls-TileView__item_invisible {
   height: 0;
   margin-top: 0;
   margin-bottom: 0;
   border: none;
}

//TODO: Выписана задача. чтобы унести стили из плитки https://online.sbis.ru/opendoc.html?guid=f1421bfc-67dd-4aa5-bf13-28df0a9ab79b
.controls-TileView__itemActions_bottomRight {
   bottom: 0;
   right: 0;
}

//TODO: Выписана задача. чтобы унести стили из плитки https://online.sbis.ru/opendoc.html?guid=f1421bfc-67dd-4aa5-bf13-28df0a9ab79b
.ws-is-hover:not(.ws-is-mobile-platform) {
   .controls-ListView__item_showActions:hover > .controls-itemActionsV {
      display: inline-block;
   }
   .controls-TileView__item:hover > .controls-TileView__item_unscaleable > .controls-itemActionsV {
      display: inline-block;
      opacity: 1;
   }
}

.controls-TileView__flex-grow {
   flex-grow: 1;
}

.controls-TileView__title_accent {
   font-weight: bold;
   display: flex;
   align-items: center;
   text-align: center;
   justify-content: center;
   max-height: @max-height_TileView-accent-title;
   min-height: @min-height_TileView-accent-title;
   padding: @spacing_TileView-around-accent-title;
   color: @color_TileView-accent-title;
}

.controls-TileView__title_accent_ellipsis {
   overflow: hidden;
   text-overflow: ellipsis;
   white-space: nowrap;
}

.controls-TileView__itemContent_accent {
   display: flex;
   flex-direction: column;
   height: 100%;
}

.controls-TileView__imageWrapper_accent {
   display: flex;
   flex-direction: column;
   height: 100%;
}
