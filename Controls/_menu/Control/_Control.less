.controls-menu {
   display: flex;
   flex-direction: column;
   position: relative;
   overflow: hidden;
   max-height: 100%;
   width: 100%;
}

.controls-Menu__scroll {
   height: 100%;
   flex-shrink: 1;
}

.controls-Menu__subMenu_margin {
   margin-top: calc(-1 * (var(--content_padding-top_sticky) + var(--border-thickness_sticky)));
}

.controls-Menu__row {
   position: relative;
   display: flex;
   align-items: center;
}

.controls-Menu__row_state_default {
   cursor: pointer;
}

.controls-Menu__row_state_readOnly {
   cursor: default;
}

.controls-Menu__row-separator {
   &::before {
      content: '';
      position: absolute;
      display: inline-block;
      background-color: var(--item_separator_color_menu);
      height: var(--item_separator_thickness_menu);
      left: var(--item_separator_padding-horizontal_menu);
      right: var(--item_separator_padding-horizontal_menu);
      bottom: 0;
   }
}

.controls-Menu__row_selected {
   position: absolute;
   display: inline-flex;
   align-items: baseline;
   left: 0;
   &::before {
      content: '\200b';
      font-size: inherit;
   }
   &::after {
      content: '';
      display: block;
      background: var(--marker_color_menu);
      width: var(--marker_width_menu);
      height: var(--marker_height_menu);
   }
}

// Будет удалено после: https://online.sbis.ru/opendoc.html?guid=8b5f2552-e249-4783-b551-3e37b285aad5
.ws-is-ie11 .controls-Menu__row_selected {
   top: 0;
   bottom: 0;
   line-height: calc(var(--item_height_menu) + 1px);
}

.ws-is-ie11 .controls-Menu__row_selected-multiLine {
   line-height: inherit;
}

.controls-Menu__row_pinned {
   font-weight: bold;
}

//не удалять, высота необходима, чтобы корректно работал align-items:center в IE
.controls-Menu__row_singleLine {
   height: var(--item_height_menu);
}

.controls-Menu__row_multiLine {
   min-height: var(--item_height_menu);
}

.controls-Menu__row-checkbox_active {
   visibility: visible;
}

.controls-Menu__row-checkbox-right {
   position: absolute;
   top: calc((var(--item_height_menu) - var(--height_checkbox)) / 2);
   right: var(--checkbox_offset-right_menu);
}

.controls-Menu__row-checkbox_invisible {
   visibility: hidden;
}

.controls-Menu__row__searchSeparator_line_horizontal {
   margin-top: var(--search-separator_padding-top_treeGrid);
   margin-bottom: var(--search-separator_padding-bottom_treeGrid);
   width: var(--search-separator_length_treeGrid);
   height: var(--search-separator_thickness_treeGrid);
   background-color: var(--search-separator_color_treeGrid);
   display: block;
}

.controls-Menu__row__rightTemplate_separator {
   width: var(--rightTemplate_separator_thickness_menu);
   background-color: var(--item_background-color_menu);
   margin: 0 var(--offset_m) 0 var(--offset_m);
   height: 100%;
   flex-shrink: 0;
}

.controls-Menu__icon {
   .flex-shrink(0);
}

.controls-Menu__icon-invisible {
   height: 0;
}

.controls-Menu__icon-left {
   margin-right: var(--item_icon_offset_menu);
}

.controls-Menu__icon-right {
   margin-left: var(--item_icon_offset_menu);
}

.controls-Menu__content {
   max-width: 100%;
   min-width: 0;
   flex-shrink: 1;
}

.controls-Menu__emptyItem {
   color: var(--empty-item_text-color_menu);
}

.controls-Menu__defaultItem {
   color: var(--item_text-color_menu);
}

.controls-Menu__defaultItem,
.controls-Menu__emptyItem {
   font-size: var(--item_font-size_menu);
}

.controls-Menu__content_readOnly {
   color: var(--readonly_item_text-color_menu);
}

.controls-Menu__content_singleLine {
   display: flex;
   align-items: center;
   align-self: center;
}

.controls-Menu__content_padding {
   display: flex;
   padding-top: var(--item_padding-top_menu);
   padding-bottom: var(--item_padding-bottom_menu);
}

.controls-Menu__content-wrapper {
   .text-overflow();
}

.controls-Menu__content-readOnly {
   color: var(--readonly_item_text-color_menu);
}

.controls-Menu_content_padding {
   display: flex;
   padding-top: var(--item_padding-top_menu);
   padding-bottom: var(--item_padding-bottom_menu);
}

.controls-Menu__content_levelPadding {
   padding-left: var(--search-hierarchy_offset_treeGrid);
}

.controls-Menu__content_baseline {
   display: flex;
   align-items: baseline;
   width: 100%;
   min-width: 0;
}

.controls-Menu__row-additionalText {
   font-size: var(--font-size_xs);
   color: var(--unaccented_text-color);
   white-space: normal;
}

.controls-Menu__arrow {
   .inline-flexbox();
   .align-items(center);
   .icon-size(var(--hierarchy_icon-size_menu));
   .box-sizing(border-box);

   position: absolute;
   top: calc((var(--item_height_menu) - var(--hierarchy_icon-size_menu)) / 2);
   right: var(--hierarchy_icon_offset-right_menu);
}

.controls-Menu__arrow_readOnly {
   color: var(--readonly_hierarchy_icon-color_menu);
}

.controls-Menu__arrow_default {
   color: var(--hierarchy_icon-color_menu);
}

.controls-Menu__iconUnnpin {
   font-weight: normal;
}

.controls-Menu__iconPin {
   .align-items(center);
   .icon-size(var(--pin-button_icon-size_menu));

   position: absolute;
   display: none;
   right: var(--pin-button_offset-right_menu);
   top: calc((var(--item_height_menu) - var(--pin-button_icon-size_menu)) / 2);
   color: var(--pin-button_icon-color_menu);
}

.controls-Menu__iconPin.controls-Menu__iconPin_swiped {
   .inline-flexbox();
}

.controls-Menu__group_separator-container {
   padding: var(--grouping_padding-vertical_menu) var(--grouping_padding-horizontal_menu);
}

.controls-Menu__group_separator {
   border-bottom: var(--grouping_separator_thickness_menu) solid var(--grouping_separator_color_menu);
}

.controls-Menu__groupHidden {
   display: none;
}

.controls-Menu__footer {
   display: flex;
   align-items: center;
   flex-shrink: 0;
}

.controls-Menu__additional {
   display: flex;
   justify-content: center;
   align-items: center;
   width: 100%;
   height: 100%;
   cursor: pointer;
}

.controls-Menu__additional:hover {
   .controls-BigSeparator-icon {
      fill: var(--hover_icon-color_BigSeparator);
   }
}

.controls-Menu__footer-additionalButton-height {
   height: var(--footer_additionalButton_min-height_menuPopup);
}

.controls-Menu__footer-moreButton-height {
   height: var(--footer_min-height_menuPopup);
}

.controls-Menu__footer-moreButton {
   padding-left: var(--item_padding-horizontal_l_menu);
}

.controls-Menu__footer-moreButton_multiSelect {
   padding-left: var(--click-area_width_checkbox);
}

.controls-text-menuMore {
   color: var(--link_text-color);
}

.controls-text-menuMore:hover {
   color: var(--link_hover_text-color);
}

.controls-text-menuMore:active {
   color: var(--link_hover_text-color);
}

.controls-inlineheight-menuapply {
   height: var(--apply-button_inline-height_menuPopup);
   width: var(--apply-button_inline-height_menuPopup);
   border-radius: var(--apply-button_border-radius_menuPopup);
}

.controls-Menu__itemActions_position_rightCenter {
   top: calc((var(--item_height_menu) - var(--height_itemActions)) / 2);
   right: 0;
}

.controls-Menu__emptyTemplate {
   padding-left: var(--item_padding-horizontal_l_menu);
   padding-right: var(--item_padding-horizontal_l_menu);
   min-height: var(--item_height_menu);
   display: flex;
   align-items: center;
}

.controls-Menu__row-breadcrumbs {
   max-height: var(--height_breadcrumbsView);
}

.controls-Menu__group_separator_left,
.controls-Menu__group_separator_right {
   flex-shrink: 1;
   height: var(--grouping_separator_thickness_menu);
   width: 100%;
   margin: var(--grouping_padding-vertical_menu) var(--grouping_padding-horizontal_menu);
}

.controls-Menu__group_content {
   display: flex;
   align-items: center;
}

.controls-Menu__group_content-text {
   display: inline-block;
   color: var(--grouping_text-color_menu);
   font-size: var(--grouping_font-size_menu);
   white-space: nowrap;
   text-align: center;
   flex-shrink: 0;
}

.controls-Menu__group_content_textAlign-right {
   margin-right: var(--grouping_padding-horizontal_menu);
}

.controls-Menu__group_content_textAlign-left {
   margin-left: var(--grouping_padding-horizontal_menu);
}

.controls-menu_backgroundStyle-default {
    background-color: var(--background-color);
}

.controls-menu_backgroundStyle-primary {
    background-color: var(--primary_background-color);
}

.controls-menu_backgroundStyle-secondary {
    background-color: var(--secondary_background-color);
}

.controls-menu_backgroundStyle-danger {
    background-color: var(--danger_background-color);
}

.controls-menu_backgroundStyle-success {
    background-color: var(--success_background-color);
}

.controls-menu_backgroundStyle-warning {
    background-color: var(--warning_background-color);
}

.controls-menu_backgroundStyle-info {
    background-color: var(--info_background-color);
}

.controls-menu_backgroundStyle-unaccented {
    background-color: var(--unaccented_contrast_background-color);
}

@padding-right_menu-multiSelect: calc(var(--apply-button_inline-height_menuPopup) + var(--offset_xs) * 2);

.controls-ListView__item-rightPadding_menu-multiselect {
   padding-right: @padding-right_menu-multiSelect;
}

.controls-ListView__item-rightPadding_menu-expander {
   padding-right: calc(var(--hierarchy_icon_offset-right_menu) + var(--hierarchy_icon-size_menu) + var(--hierarchy_icon_offset-left_menu));
}

@padding-right_menu-close: calc(var(--close-button_offset-left_sticky) + var(--width_closeButton_link) + var(--close-button_offset-right_sticky));

.controls-ListView__item-rightPadding_menu-close {
   padding-right: @padding-right_menu-close;
}

.controls-ListView__item-rightPadding_menu-close-multiselect {
   padding-right: calc(@padding-right_menu-close + @padding-right_menu-multiSelect);
}

.controls-ListView__item-rightPadding_menu-pin {
   padding-right: calc(var(--pin-button_offset-left_menu) + var(--pin-button_icon-size_menu) + var(--pin-button_offset-right_menu));
}

.controls-ListView__item-rightPadding_menu-xs {
   padding-right: var(--item_padding-horizontal_s_menu);
}

.controls-ListView__item-leftPadding_menu-xs {
   padding-left: var(--item_padding-horizontal_s_menu);
}

.ws-is-hover {
    .controls-Menu__row_state_default:hover {
        background: var(--item_hover_background-color_menu);

        .controls-Menu__row-checkbox_default {
            visibility: visible;
        }

        .controls-Menu__iconPin {
           .inline-flexbox();
        }

        .controls-itemActionsV {
            opacity: 1;
            visibility: visible;
        }
    }

    .controls-Menu__iconPin:hover {
        color: var(--pin-button_hover_icon-color_menu);
    }

    .controls-menu_backgroundStyle-hover-default:hover {
        background-color: var(--hover_background-color);
    }

    .controls-menu_backgroundStyle-hover-primary:hover {
        background-color: var(--primary_hover_background-color);
    }

    .controls-menu_backgroundStyle-hover-secondary:hover {
        background-color: var(--secondary_hover_background-color);
    }

    .controls-menu_backgroundStyle-hover-danger:hover {
        background-color: var(--danger_hover_background-color);
    }

    .controls-menu_backgroundStyle-hover-success:hover {
        background-color: var(--success_hover_background-color);
    }

    .controls-menu_backgroundStyle-hover-warning:hover {
        background-color: var(--warning_hover_background-color);
    }

    .controls-menu_backgroundStyle-hover-info:hover {
        background-color: var(--info_hover_background-color);
    }

    .controls-menu_backgroundStyle-hover-unaccented:hover {
        background-color: var(--unaccented_hover_contrast_background-color);
    }
}

.ws-is-no-touch {
   .controls-Menu__row-checkbox_default {
      visibility: hidden;
   }
}
